half modified file to stash implementation